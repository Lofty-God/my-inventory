name: continous integration
on: push
env: 
  DB_NAME: test
  Db_USER: root
  DB_PASSWORD: Oraplus@95
job:
 run code checks:
    runs on: ubuntu-latest
    steps:
    - name: set up MySQL
      run: |
        sudo /etc/init.d/mysql start
        sudo mysql -e 'ALTER USER "${{Db_USER}}"@"localhost" identified by "${{DB_PASSWORD}}";' -uroot -proot
        sudo mysql -e 'CREATE DATABASE ${{DB_DATABASE}};' -u${{Db_USER}} -p${{DB_PASSWORD}}
    - name: checkout repo code
      uses: Actions/checkout@v2
    - name: set up go
      uses: Actions/setup-go@v2
      with:
        go-version: 1.18.1
    - name: run linting
      run: |
        go fmt ./...
        go vet ./...
    - name: run tests
      run: go test

  

name: Continous Integration
on: push
env: 
  DB_NAME: Assessment
  Db_USER: root
  DB_PASSWORD: Oraplus@123
jobs: 
 run_code_checks:
    runs-on: ubuntu-latest
    steps:
    - name: Set up MySQL
      run: |
        sudo mysql -e 'ALTER USER "${{env.Db_USER}}"@"localhost" IDENTIFIED BY "${{env.DB_PASSWORD}}";' -uroot -proot
        sudo mysql -e 'CREATE DATABASE ${{env.DB_DATABASE}};' -u${{env.Db_USER}} -p${{env.DB_PASSWORD}}
    - name: Checkout Repo Code
      uses: actions/checkout@v2
    - name: Set Up Go
      uses: actions/setup-go@v2
      with:
        go-version: 1.19
    - name: Run linting
      run: |
        go fmt ./...
        go vet ./...
    - name: run tests
      run: go Assessment

  
